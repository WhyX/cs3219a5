<!DOCTYPE html>
<html lang="en">
<head>
  <title>{{seo.commithistory.title}}</title>
  <meta charset="utf-8">
  <meta name="description" content="{{seo.commithistory.description}}">
  <link href="assets/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/css/style.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="assets/css/commitHistory.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="assets/js/commitHistory.js"></script>
  <script src="assets/js/jquery.color-2.1.2.min.js"></script>

  <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="assets/js/html5shiv.js"></script>
      <![endif]-->
    </head>

    <body class="{{seo.commithistory.body_class}}">

      <div class="container">

        {{> head }}

        <div class="placeholder">
          {{> commithistory }}
        </div>

        <div>
        <div class="input-group" style="display:flex;justify-content: center; margin-bottom:30px;">
          <input type="text" class="form-control" placeholder="Username" aria-describedby="basic-addon1" id="user-inputbar" style="margin-right: 10px;">
        </div>

         <div class="input-group" style="display:flex;justify-content: center; margin-bottom:30px;">
          <input type="text" class="form-control" placeholder="File" aria-describedby="basic-addon1" id="user-inputbar" style="margin-right: 10px;">
        </div>

        <div style="display:flex;justify-content: center;">
         <button id="submit-btn" type="button" class="btn btn-primary" style="display:flex;justify-content: center;margin-bottom: 10px;text-transform: uppercase;">
            Submit
          </button>
        </div>
      </div>

        <script>
        var url = 'http://ec2-54-179-159-147.ap-southeast-1.compute.amazonaws.com:3000/api/member/commits?owner=tungnk1993&repo=scrapy&author=pablohoffman&start=2011-04-14T16:00:49Z&end=2016-11-02T17:31:06.573Z';
        var commits = [];

        $.get(url, function(data, status) {
          console.log(data);
          var processedData = preProcess(data);

          createCommitHistoryTable(processedData);
        });

        var preProcess = function(data) {
          console.log(data);
          var processedData = {};

          for(var i = data.length - 1; i >= 0; i--) {
            var dateTime = data[i].commit_date;
            dateTime = dateTime.substring(0, dateTime.length - 1).split("T");
            var date = dateTime[0];
            var time = dateTime[1];
            var message = data[i].commit_message;
            var image_url = data[i].author_avatar_url;

            var commit = {};
            commit["time"] = time;
            commit["message"] = message;
            commit["image_url"] = image_url;

            if(processedData[date] != null) {
              processedData[date].push(commit);
            } else {
              var newDate = [commit];
              processedData[date] = newDate;
            }
          }

          return processedData;
        }
        </script>

      </body>
      </html>
